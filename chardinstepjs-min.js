(function(){var t=[].slice;!function($,e){var i;return i=function(){function t(t){var i=this;this.$el=$(t),$(e).resize(function(){return i.refresh()})}return t.prototype.start=function(){var t,e,i,s,n=[];if(this._overlay_visible())return!1;for(s=this.$el.find("*[data-intro]:visible"),e=0,i=s.length;i>e;e++)t=s[e],n[$(t).attr("data-step")]=n[$(t).attr("data-step")]||[],n[$(t).attr("data-step")].push(t);return this.steps=n,this.stepIndex=0,this._add_overlay_layer(),this.displayCurrentStep(),this.$el.trigger("chardinStepJs:start")},t.prototype.displayCurrentStep=function(){if(this.stepIndex==this.steps.length)this.stop();else{this.$el.find(".chardinjs-helper-layer").remove(),$(".chardinjs-show-element").removeClass("chardinjs-show-element");var t=this.steps[this.stepIndex];for(_i=0,_len=t.length;_i<_len;_i++)el=t[_i],this._show_element(el)}},t.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()},t.prototype.refresh=function(){var t,e,i,s,n;if(this._overlay_visible()){for(s=this.$el.find("*[data-intro]:visible"),n=[],e=0,i=s.length;i>e;e++)t=s[e],n.push(this._position_helper_layer(t));return n}return this},t.prototype.stop=function(){return this.$el.find(".chardinjs-overlay").fadeOut(function(){return $(this).remove()}),this.$el.find(".chardinjs-helper-layer").remove(),this.$el.find(".chardinjs-next-button").remove(),this.$el.find(".chardinjs-step-counter").remove(),this.$el.find(".chardinjs-show-element").removeClass("chardinjs-show-element"),this.$el.find(".chardinjs-relative-position").removeClass("chardinjs-relative-position"),e.removeEventListener?e.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this.$el.trigger("chardinStepJs:stop")},t.prototype._overlay_visible=function(){return 0!==this.$el.find(".chardinjs-overlay").length},t.prototype._add_overlay_layer=function(){var t,e,i,s,n,r,o=this;return this._overlay_visible()?!1:(e=document.createElement("div"),s=document.createElement("button"),r=document.createElement("div"),i="",e.className="chardinjs-overlay",s.className="chardinjs-next-button",r.className="chardinjs-step-counter",s.innerHTML="Next",r.innerHTML=parseInt(o.stepIndex)+1+" / "+o.steps.length,r.setAttribute("style","bottom: 83px; right: 294px;position: fixed; z-index:9999998; font-size: 24px; color: #fff;"),"BODY"===this.$el.prop("tagName")?(i+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",e.setAttribute("style",i)):(t=this._get_offset(this.$el.get()[0]),t&&(i+="width: "+t.width+"px; height:"+t.height+"px; top:"+t.top+"px;left: "+t.left+"px;",e.setAttribute("style",i))),this.$el.get()[0].appendChild(e),this.$el.get()[0].appendChild(s),this.$el.get()[0].appendChild(r),e.onclick=function(){return o.stop()},s.onclick=function(){return o.stepIndex+=1,o.stepIndex+1==o.steps.length&&(s.innerHTML="Done"),o.stepIndex<o.steps.length&&(r.innerHTML=parseInt(o.stepIndex)+1+" / "+o.steps.length),o.displayCurrentStep()},setTimeout(function(){return i+="opacity: .8;opacity: .8;-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=80)';filter: alpha(opacity=80);",e.setAttribute("style",i)},10))},t.prototype._get_position=function(t){return t.getAttribute("data-position")||"bottom"},t.prototype._place_tooltip=function(t){var e,i,s,n,r,o,a;switch(o=$(t).data("tooltip_layer"),a=this._get_offset(o),o.style.top=null,o.style.right=null,o.style.bottom=null,o.style.left=null,this._get_position(t)){case"top":case"bottom":s=this._get_offset(t),r=s.width,i=$(o).width(),o.style.left=""+(r/2-a.width/2)+"px";break;case"left":case"right":s=this._get_offset(t),n=s.height,e=$(o).height(),o.style.top=""+(n/2-a.height/2)+"px"}switch(this._get_position(t)){case"left":return o.style.left="-"+(a.width-34)+"px";case"right":return o.style.right="-"+(a.width-34)+"px";case"bottom":return o.style.bottom="-"+a.height+"px";case"top":return o.style.top="-"+a.height+"px"}},t.prototype._position_helper_layer=function(t){var e,i;return i=$(t).data("helper_layer"),e=this._get_offset(t),i.setAttribute("style","width: "+e.width+"px; height:"+e.height+"px; top:"+e.top+"px; left: "+e.left+"px;")},t.prototype._show_element=function(t){var e,i,s,n;return i=this._get_offset(t),s=document.createElement("div"),n=document.createElement("div"),$(t).data("helper_layer",s).data("tooltip_layer",n),t.id&&s.setAttribute("data-id",t.id),s.className="chardinjs-helper-layer chardinjs-"+this._get_position(t),this._position_helper_layer(t),this.$el.get()[0].appendChild(s),n.className="chardinjs-tooltip chardinjs-"+this._get_position(t),n.innerHTML="<div class='chardinjs-tooltiptext'>"+t.getAttribute("data-intro")+"</div>",s.appendChild(n),this._place_tooltip(t),t.className+=" chardinjs-show-element",e="",t.currentStyle?e=t.currentStyle.position:document.defaultView&&document.defaultView.getComputedStyle&&(e=document.defaultView.getComputedStyle(t,null).getPropertyValue("position")),e=e.toLowerCase(),"absolute"!==e&&"relative"!==e?t.className+=" chardinjs-relative-position":void 0},t.prototype._get_offset=function(t){var e,i,s;for(e={width:t.offsetWidth,height:t.offsetHeight},i=0,s=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)i+=t.offsetLeft,s+=t.offsetTop,t=t.offsetParent;return e.top=s,e.left=i,e},t}(),$.fn.extend({chardinStepJs:function(){var e,s,n,r;return r=arguments[0],s=2<=arguments.length?t.call(arguments,1):[],e=$(this[0]),n=e.data("chardinStepJs"),n||e.data("chardinStepJs",n=new i(this,r)),"string"==typeof r&&n[r].apply(n,s),n}})}(window.jQuery,window)}).call(this);